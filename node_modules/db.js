const { MongoClient } = require('mongodb');

const uri = 'mongodb://localhost:27017'; // MongoDB URI
const client = new MongoClient(uri, { useNewUrlParser: true, useUnifiedTopology: true });

async function createDatabaseAndCollection() {
  try {
    // Connect to MongoDB
    await client.connect();
    console.log('Connected to MongoDB!');
    
    // Create or switch to the database (e.g., 'myNewDatabase')
    const database = client.db('myNewDatabase');
    
    // Create a new collection (e.g., 'users') and insert a document
    const collection = database.collection('users');
    
    // Insert a document into the 'users' collection (creates the collection if it doesn't exist)
    const result = await collection.insertOne({ name: 'John Doe', email: 'john@example.com', age: 30 });
    
    console.log('Document inserted with _id:', result.insertedId);
    
  } catch (error) {
    console.error('Error:', error);
  } finally {
    // Close the connection
    await client.close();
  }
}

createDatabaseAndCollection().catch(console.error);
